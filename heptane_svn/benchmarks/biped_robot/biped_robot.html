<html>
<head>
<title></title>
</head>
<body>
<h1>/data/benchmarks/biped_robot/biped_robot.c</h1> <br>
<table border=0 cellpadding=0 cellspacing=0>
<tr><td><h2>Frequency</h2></td><th><h2>Source</h2></th></tr><tr><td> 0</td>
<td><tt><pre>/* Generated by CIL v. 1.7.3 */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/* print_CIL_Input is true */</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>#include<annot.h></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>typedef unsigned char U8;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>typedef unsigned short U16;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>typedef short S16;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>enum __anonenum_motionCmd_t_622667461 {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    NEUTRAL = 0,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    STAND_UP = 1,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    FORWARD = 2,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    RIGHT_TURN = 3,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    LEFT_TURN = 4</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>} ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>typedef enum __anonenum_motionCmd_t_622667461 motionCmd_t;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>struct __anonstruct_motion_t_763372307 {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>   S16 angle[1][10] ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>   U16 wait ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>};</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>typedef struct __anonstruct_motion_t_763372307 motion_t;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>struct __anonstruct_motionTable_t_630939579 {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>   motion_t *pMotion ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>   int steps ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>};</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>typedef struct __anonstruct_motionTable_t_630939579 motionTable_t;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>typedef unsigned char UINT8___0;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>typedef UINT8___0 StatusType___0;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>typedef UINT8___0 TaskType___0;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>typedef UINT8___0 ResourceType___0;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>typedef UINT8___0 CounterType___0;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>typedef unsigned char U8___0;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>typedef signed char S8___0;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>typedef unsigned long U32___0;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>typedef enum __anonenum_motionCmd_t_622667461 motionCmd_t___0;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>enum __anonenum_motionCmd_t_763372308 {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    NEUTRAL___1 = 0,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    STAND_UP___1 = 1,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    FORWARD___1 = 2,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    RIGHT_TURN___1 = 3,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    LEFT_TURN___1 = 4</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>} ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>typedef enum __anonenum_motionCmd_t_763372308 motionCmd_t___1;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern void ecrobot_init_bt_slave(char const   *pin ) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern void ecrobot_term_bt_connection(void) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern unsigned long ecrobot_read_bt_packet(unsigned char *buf , unsigned long bufLen ) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern void ecrobot_init_i2c(unsigned char port_id , unsigned char type ) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern void ecrobot_term_i2c(unsigned char port_id ) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern void ecrobot_status_monitor(char const   *target_name ) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>void ecrobot_device_initialize(void) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>void ecrobot_device_terminate(void) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>void user_1ms_isr_type2(void) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern unsigned char TerminateTask(void) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern unsigned char ChainTask(unsigned char tskid ) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern unsigned char GetTaskID(unsigned char *p_tskid ) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern unsigned char GetResource(unsigned char resid ) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern unsigned char ReleaseResource(unsigned char resid ) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern void ShutdownOS(unsigned char ercd ) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern unsigned char SignalCounter(unsigned char cntid ) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern void check_sleepers(void) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern void sleep(unsigned int duration ) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern U8 const   NXTe_CH[4] ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern void init_NXTe(U8 port_id ) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern void sync_NXTeServo(U8 port_id , U8 nxte_ch ) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern void load_NXTeServo(U8 port_id , U8 nxte_ch , U16 servo_ch_bit ) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern U16 read_NXTeMotion(U8 port_id , U8 nxte_ch ) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern void set_NXTeDelay(U8 port_id , U8 nxte_ch , U8 servo_ch , U8 delay ) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern void set_NXTeAngle(U8 port_id , U8 nxte_ch , U8 servo_ch , S16 angle ) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>void initServo(U8 port_id ) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>int setServo(U8 port_id , motion_t *motion ) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>void setMotion(U8 port_id , motionCmd_t cmd ) ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>motion_t const   PRM_NEUTRAL[1]  = {      {{{(S16 )1000, (S16 )1000, (S16 )1000, (S16 )1000, (S16 )1000, (S16 )1000, (S16 )1000,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )1000, (S16 )1000, (S16 )1000}}, (U16 )0}};</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>motion_t const   PRM_STAND_UP[1]  = {      {{{(S16 )1000, (S16 )1000, (S16 )800, (S16 )1200, (S16 )800, (S16 )1200, (S16 )800,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )1200, (S16 )1000, (S16 )1000}}, (U16 )500}};</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>motion_t const   PRM_FORWARD[9]  = </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  {      {{{(S16 )950, (S16 )950, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )850, (S16 )-1,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )-1, (S16 )1050}}, (U16 )200}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )300, (S16 )-1, (S16 )400, (S16 )-1, (S16 )900, (S16 )-1,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )1050, (S16 )1100}}, (U16 )100}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )200, (S16 )1100, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )1350,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )850, (S16 )900}}, (U16 )200}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )800, (S16 )-1, (S16 )800, (S16 )-1, (S16 )850, (S16 )-1,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )-1, (S16 )-1}}, (U16 )0}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )-1, (S16 )1600, (S16 )-1, (S16 )1500, (S16 )-1,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )-1, (S16 )-1, (S16 )-1}}, (U16 )200}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )1200,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )-1, (S16 )-1}}, (U16 )0}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )700, (S16 )-1,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )1100, (S16 )1150}}, (U16 )100}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )-1, (S16 )1200, (S16 )-1, (S16 )1200, (S16 )-1,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )-1, (S16 )1000, (S16 )1050}}, (U16 )200}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )850, (S16 )-1,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )-1, (S16 )-1}}, (U16 )100}};</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>motion_t const   PRM_RIGHT_TURN[9]  = </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  {      {{{(S16 )1050, (S16 )1050, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )850,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )-1, (S16 )-1, (S16 )1050}}, (U16 )200}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )300, (S16 )-1, (S16 )400, (S16 )-1, (S16 )900, (S16 )-1,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )1050, (S16 )1100}}, (U16 )100}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )200, (S16 )1100, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )1350,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )850, (S16 )900}}, (U16 )200}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )800, (S16 )-1, (S16 )800, (S16 )-1, (S16 )850, (S16 )-1,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )-1, (S16 )-1}}, (U16 )0}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )-1, (S16 )1600, (S16 )-1, (S16 )1500, (S16 )-1,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )-1, (S16 )-1, (S16 )-1}}, (U16 )200}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )1200,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )-1, (S16 )-1}}, (U16 )0}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )700, (S16 )-1,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )1100, (S16 )1150}}, (U16 )100}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )-1, (S16 )1200, (S16 )-1, (S16 )1200, (S16 )-1,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )-1, (S16 )1000, (S16 )1050}}, (U16 )200}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )850, (S16 )-1,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )-1, (S16 )-1}}, (U16 )100}};</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>motion_t const   PRM_LEFT_TURN[9]  = </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  {      {{{(S16 )950, (S16 )950, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )1150,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )950, (S16 )-1}}, (U16 )200}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )-1, (S16 )1700, (S16 )-1, (S16 )1600, (S16 )-1,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )1100, (S16 )900, (S16 )950}}, (U16 )100}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )900, (S16 )1800, (S16 )-1, (S16 )-1, (S16 )650,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )-1, (S16 )1100, (S16 )1150}}, (U16 )200}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )-1, (S16 )1200, (S16 )-1, (S16 )1200, (S16 )-1,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )1150, (S16 )-1, (S16 )-1}}, (U16 )0}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )400, (S16 )-1, (S16 )500, (S16 )-1, (S16 )-1, (S16 )-1,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )-1, (S16 )-1}}, (U16 )200}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )800, (S16 )-1,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )-1, (S16 )-1}}, (U16 )0}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )1300,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )850, (S16 )900}}, (U16 )100}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )800, (S16 )-1, (S16 )800, (S16 )-1, (S16 )-1, (S16 )-1,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )950, (S16 )1000}}, (U16 )200}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {{{(S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )-1, (S16 )1150,</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        (S16 )-1, (S16 )-1}}, (U16 )100}};</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>motionTable_t const   motionTable[5]  = {      {(motion_t *)(PRM_NEUTRAL), (int )(sizeof(PRM_NEUTRAL) / sizeof(motion_t ))}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {(motion_t *)(PRM_STAND_UP),</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>      (int )(sizeof(PRM_STAND_UP) / sizeof(motion_t ))}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {(motion_t *)(PRM_FORWARD), (int )(sizeof(PRM_FORWARD) / sizeof(motion_t ))}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {(motion_t *)(PRM_RIGHT_TURN),</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>      (int )(sizeof(PRM_RIGHT_TURN) / sizeof(motion_t ))}, </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        {(motion_t *)(PRM_LEFT_TURN), (int )(sizeof(PRM_LEFT_TURN) / sizeof(motion_t ))}};</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*void initServo(U8 port_id ) </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>{ </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  int i ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  U8 servo_ch ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  init_NXTe(port_id);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  i = 0;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  while (i < 1) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    sync_NXTeServo(port_id, (U8 )NXTe_CH[i]);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    load_NXTeServo(port_id, (U8 )NXTe_CH[i], (U16 )1023);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    servo_ch = (U8 )1;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    while ((int )servo_ch <= 10) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>      set_NXTeDelay(port_id, (U8 )NXTe_CH[i], servo_ch, (U8 )4);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>      servo_ch = (U8 )((int )servo_ch + 1);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    i ++;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  return;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>}</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>}</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>int setServo(U8 port_id , motion_t *motion ) </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>{ </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  int i ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  S16 angle ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  U8 servo_ch ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  U16 tmp ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  i = 0;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  while (i < 1) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    tmp = read_NXTeMotion(port_id, (U8 )NXTe_CH[i]);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    if ((int )tmp != 0) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>      return (0);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    i ++;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  i = 0;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  while (i < 1) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    servo_ch = (U8 )1;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    while ((int )servo_ch <= 10) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>      angle = motion->angle[i][(int )servo_ch - 1];</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>      if ((int )angle != -1) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        set_NXTeAngle(port_id, (U8 )NXTe_CH[i], servo_ch, angle);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>      }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>      servo_ch = (U8 )((int )servo_ch + 1);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    i ++;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  if ((int )motion->wait > 0) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    sleep((unsigned int )motion->wait);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  return (1);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>}</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>}*/</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern ResourceType___0 ResourceCommand ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern CounterType___0 const   SysTimerCnt ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>static motionCmd_t___1 motionCmd  ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>/*void ecrobot_device_initialize(void) </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>{ </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  ecrobot_init_i2c((U8___0 )2, (U8___0 )1);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  ecrobot_init_bt_slave("nxtOSEK");</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  return;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>}</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>}</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>void ecrobot_device_terminate(void) </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>{ </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  ecrobot_term_i2c((U8___0 )2);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  ecrobot_term_bt_connection();</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  return;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>}</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>}</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>void user_1ms_isr_type2(void) </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>{ </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  StatusType___0 ercd ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  ercd = SignalCounter((CounterType___0 )SysTimerCnt);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  if ((int )ercd != 0) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    ShutdownOS(ercd);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  check_sleepers();</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  return;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>}</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>}*/</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>void TaskMainTask_Init(void) </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>{ </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  return;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>}</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>}</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>void TaskMainTask_Commander(void) </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>{ </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  U8___0 bt_receive_buf[32] ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  U32___0 tmp ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  S8___0 in13 ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  S8___0 in24 ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  motionCmd_t___1 cmd5 ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  motionCmd_t___1 ret_getMotionCommand6 ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>   tmp = 1;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  //tmp = ecrobot_read_bt_packet(bt_receive_buf, (U32___0 )32);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  if (tmp) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>   // GetResource(ResourceCommand);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    in13 = (S8___0 )(- ((int )*((S8___0 *)(& bt_receive_buf[0]))));</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    in24 = *((S8___0 *)(& bt_receive_buf[1]));</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    cmd5 = (motionCmd_t___1 )1;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    if ((int )in13 == 0) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>      if ((int )in24 > 0) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        cmd5 = (motionCmd_t___1 )3;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>      } else</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>      if ((int )in24 < 0) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        cmd5 = (motionCmd_t___1 )4;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>      }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    } else</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    if ((int )in13 > 0) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>      if ((int )in24 == 0) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        cmd5 = (motionCmd_t___1 )2;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>      }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    ret_getMotionCommand6 = cmd5;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    goto Lret_getMotionCommand;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    Lret_getMotionCommand: </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    motionCmd = ret_getMotionCommand6;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  //  ReleaseResource(ResourceCommand);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  //TerminateTask();</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  return;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>}</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>}</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>void TaskMainTask_Display(void) </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>{ </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre> //   ecrobot_status_monitor("BIPED ROBOT");</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre> // TerminateTask();</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    int display = 1;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  return;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>}}</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>void TaskMainTask_MotionControl(void) </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>{ </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  motionCmd_t___1 cmd ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  TaskType___0 t ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  U8 port_id3 ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  motionCmd_t cmd4 ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  int i5 ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  int tmp6 ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  {  {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  //GetResource(ResourceCommand);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  cmd = motionCmd;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  //ReleaseResource(ResourceCommand);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  port_id3 = (U8___0 )2;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  cmd4 = (motionCmd_t___0 )cmd;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  if ((unsigned long )cmd4 >= sizeof(motionTable)) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    goto Lret_setMotion;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  i5 = 0;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  while (i5 < (int )motionTable[cmd4].steps) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  ANNOT_MAXITER(6);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>   // tmp6 = setServo(port_id3, (motion_t *)(motionTable[cmd4].pMotion + i5));</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    tmp6 = 1;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    if (tmp6 == 0) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>      i5 --;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>      if (i5 < 0) {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>        i5 = 0;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>      }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    i5 ++;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  goto Lret_setMotion;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  Lret_setMotion: /* CIL Label */ ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre> // GetTaskID(& t);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre> // ChainTask(t);</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  return;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>}</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>}</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern int create_task() ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>extern int create_block() ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre> void Task_Display_blk()</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre> {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    motionCmd_t___1 cmd ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    cmd = motionCmd;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre> }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre> void Task_Commander_blk()</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre> {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>     U8___0 bt_receive_buf[32] ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>     U32___0 tmp ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>     S8___0 in13 ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>     S8___0 in24 ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>     motionCmd_t___1 cmd5 ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>     motionCmd_t___1 ret_getMotionCommand6 ;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>    in13 = (S8___0 )(- ((int )*((S8___0 *)(& bt_receive_buf[0]))));</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>    in24 = *((S8___0 *)(& bt_receive_buf[1]));</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>    cmd5 = (motionCmd_t___1 )1;</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>    if ((int )in13 == 0) {</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>      if ((int )in24 > 0) {</pre></tt></td></tr>
<tr> <td>0 </td>
<td><tt><pre>        cmd5 = (motionCmd_t___1 )3;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>      } else</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>      if ((int )in24 < 0) {</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>        cmd5 = (motionCmd_t___1 )4;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>      }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    } else</pre></tt></td></tr>
<tr> <td>0 </td>
<td><tt><pre>    if ((int )in13 > 0) {</pre></tt></td></tr>
<tr> <td>0 </td>
<td><tt><pre>      if ((int )in24 == 0) {</pre></tt></td></tr>
<tr> <td>0 </td>
<td><tt><pre>        cmd5 = (motionCmd_t___1 )2;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>      }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    }</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>    ret_getMotionCommand6 = cmd5;</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>    goto Lret_getMotionCommand;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>    Lret_getMotionCommand: </pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>    motionCmd = ret_getMotionCommand6;</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>  }</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre></pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>void main(void) </pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>{ </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  {</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre> </pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  //TaskMainTask_Commander();</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  //TaskMainTask_Display();</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  //TaskMainTask_MotionControl();</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>  //Task_Display_blk();</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>  Task_Commander_blk();</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>  return;</pre></tt></td></tr>
<tr><td> 0</td>
<td><tt><pre>}</pre></tt></td></tr>
<tr bgcolor="lightgreen"> <td>1 </td>
<td><tt><pre>}</pre></tt></td></tr>
</table>
</body> </html>
